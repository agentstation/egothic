```sh
                                          _   _      _
                         ___   __ _  ___ | |_| |__  (_) ___ 
                        / _ \ / _` |/ _ \| __| '_ \ | |/ __|
                       |  __/| (_| | (_) | |_| | | || | (__ 
                        \___| \__, |\___/ \__|_| |_||_|\___|
                              |___/                     
```

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# egothic

```go
import "github.com/agentstation/egothic"
```

Package egothic is a modified version of original gothic package for the Echo server. The original gothic package is a wrapper for the Goth library. This package is based on https://github.com/markbates/goth/blob/edc3e96387cb58c3f3d58e70db2f115815ccdf1e/gothic/gothic.go

## Index

- [Variables](<#variables>)
- [func BeginAuthHandler\(e echo.Context\) error](<#BeginAuthHandler>)
- [func GetAuthURL\(e echo.Context\) \(string, error\)](<#GetAuthURL>)
- [func GetFromSession\(e echo.Context, key string\) \(string, error\)](<#GetFromSession>)
- [func Logout\(e echo.Context\) error](<#Logout>)
- [func SetStore\(store sessions.Store\)](<#SetStore>)
- [func Store\(\) sessions.Store](<#Store>)
- [func StoreInSession\(e echo.Context, key string, value string\) error](<#StoreInSession>)


## Variables

<a name="CompleteUserAuth"></a>CompleteUserAuth does what it says on the tin. It completes the authentication process and fetches all of the basic information about the user from the provider.

It expects to be able to get the name of the provider from the query parameters as either "provider" or ":provider".

```go
var CompleteUserAuth = func(e echo.Context) (goth.User, error) {

    defer func() {

        _ = Logout(e)
    }()

    providerName, err := GetProviderName(e)
    if err != nil {
        return goth.User{}, err
    }

    provider, err := goth.GetProvider(providerName)
    if err != nil {
        return goth.User{}, err
    }

    value, err := GetFromSession(e, providerName)
    if err != nil {
        return goth.User{}, err
    }

    sess, err := provider.UnmarshalSession(value)
    if err != nil {
        return goth.User{}, err
    }

    err = validateState(e, sess)
    if err != nil {
        return goth.User{}, err
    }

    user, err := provider.FetchUser(sess)
    if err == nil {

        return user, err
    }

    params := e.Request().URL.Query()

    if params.Encode() == "" && e.Request().Method == postHTTPMethod {
        err = e.Request().ParseForm()
        if err != nil {
            return goth.User{}, err
        }
        params = e.Request().Form
    }

    _, err = sess.Authorize(provider, params)
    if err != nil {
        return goth.User{}, err
    }

    if err = StoreInSession(e, providerName, sess.Marshal()); err != nil {
        return goth.User{}, err
    }

    gu, err := provider.FetchUser(sess)
    return gu, err
}
```

<a name="GetProviderName"></a>GetProviderName is a function used to get the name of a provider for a given request. By default, this provider is fetched from the URL query string. If you provide it in a different way, assign your own function to this variable that returns the provider name for your request.

```go
var GetProviderName = getProviderName
```

<a name="GetState"></a>GetState gets the state returned by the provider during the callback. This is used to prevent CSRF attacks, see http://tools.ietf.org/html/rfc6749#section-10.12

```go
var GetState = func(e echo.Context) string {
    return gothic.GetState(e.Request())
}
```

<a name="SetState"></a>SetState sets the state string associated with the given request. If no state string is associated with the request, one will be generated. This state is sent to the provider and can be retrieved during the callback.

```go
var SetState = func(e echo.Context) string {
    return gothic.SetState(e.Request())
}
```

<a name="BeginAuthHandler"></a>
## func [BeginAuthHandler](<https://github.com/agentstation/egothic/blob/master/egothic.go#L41>)

```go
func BeginAuthHandler(e echo.Context) error
```

BeginAuthHandler is a convenience handler for starting the authentication process. It expects to be able to get the name of the provider from the query parameters as either "provider" or ":provider".

BeginAuthHandler will redirect the user to the appropriate authentication end\-point for the requested provider.

<a name="GetAuthURL"></a>
## func [GetAuthURL](<https://github.com/agentstation/egothic/blob/master/egothic.go#L74>)

```go
func GetAuthURL(e echo.Context) (string, error)
```

GetAuthURL starts the authentication process with the requested provided. It will return a URL that should be used to send users to.

It expects to be able to get the name of the provider from the query parameters as either "provider" or ":provider".

I would recommend using the BeginAuthHandler instead of doing all of these steps yourself, but that's entirely up to you.

<a name="GetFromSession"></a>
## func [GetFromSession](<https://github.com/agentstation/egothic/blob/master/egothic.go#L243>)

```go
func GetFromSession(e echo.Context, key string) (string, error)
```

GetFromSession retrieves a previously\-stored value from the session. If no value has previously been stored at the specified key, it will return an error.

<a name="Logout"></a>
## func [Logout](<https://github.com/agentstation/egothic/blob/master/egothic.go#L218>)

```go
func Logout(e echo.Context) error
```

Logout invalidates a user session.

<a name="SetStore"></a>
## func [SetStore](<https://github.com/agentstation/egothic/blob/master/egothic.go#L24>)

```go
func SetStore(store sessions.Store)
```

SetStore sets the store for the gothic session.

<a name="Store"></a>
## func [Store](<https://github.com/agentstation/egothic/blob/master/egothic.go#L29>)

```go
func Store() sessions.Store
```

Store returns the store for the gothic session.

<a name="StoreInSession"></a>
## func [StoreInSession](<https://github.com/agentstation/egothic/blob/master/egothic.go#L237>)

```go
func StoreInSession(e echo.Context, key string, value string) error
```

StoreInSession stores a specified key/value pair in the session.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->